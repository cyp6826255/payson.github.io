---
layout: post
lang: zh
title: "Notes on some issues when upgrading to Xcode 26"
subtitle: "xcode26"
date: 2025-10-16
author: "PaysonChen"
header-img: "img/post-bg-2015.jpg"
tags: [iOS26,适配,xcode26]
---

## 1、Preface

​	Given Apple's consistent lack of backward compatibility in its updates, it's essential to adapt to newer compilers and libraries as soon as possible to implement iOS 26 features.

## 2、ISSUS

### 2.1、SWIFT 6

```shell

Showing All Errors Only
Undefined symbol: __swift_FORCE_LOAD_$_swiftCompatibility50
Undefined symbol: __swift_FORCE_LOAD_$_swiftCompatibility51
Undefined symbol: __swift_FORCE_LOAD_$_swiftCompatibility56
Undefined symbol: __swift_FORCE_LOAD_$_swiftCompatibilityConcurrency
Undefined symbol: __swift_FORCE_LOAD_$_swiftCompatibilityDynamicReplacements
Linker command failed with exit code 1 (use -v to see invocation)
```

​	The above error occurs when compiling the project with Xcode26. The error log seems to be a SWIFT API problem. Some symbols cannot be found. Based on the symbols, it should be a compatibility issue between the old and new versions of SWIFT.

### 2.2、Modify the SWIFT version

​	Try to modify the Podfile SWIFT version：

```ruby
post_install do |installer|
    installer.generated_projects.each do |project|
          project.targets.each do |target|
              target.build_configurations.each do |config|
								  config.build_settings["EXCLUDED_ARCHS[sdk=iphonesimulator*]"] = "arm64"
                  config.build_settings['IPHONEOS_DEPLOYMENT_TARGET'] = '12.0'
                  # 统一 Swift 版本为 6.0（Xcode 26）
                  config.build_settings['SWIFT_VERSION'] = '6.0'
               end
          end
   end
end
```

​	And the SWIFT version of the main project：

```shell
SWIFT_VERSION = 4.0
=>
SWIFT_VERSION = 6.0
```

​	In addition to the error message, other errors were added: the SWIFT version of the program

```shell

Showing All Errors Only
/Users/psc/Documents/PSC/Hybrid/H5/PSCH5Module/Example/Pods/PSCAPM/PSCAPM/Classes/PSC/PSCAPMEventReportUtils+PSC.swift:36:52: Non-Sendable 'String'-typed result can not be returned from main actor-isolated class method 'platformString()' to nonisolated context

/Users/psc/Documents/PSC/Hybrid/H5/PSCH5Module/Example/Pods/PSCAPM/PSCAPM/Classes/PSC/PSCAPMEventReportUtils+PSC.swift:37:52: Non-Sendable 'String'-typed result can not be returned from main actor-isolated class method 'systemVersion()' to nonisolated context

/Users/psc/Documents/PSC/Hybrid/H5/PSCH5Module/Example/Pods/PSCAPM/PSCAPM/Classes/PSC/PSCAPMEventReportUtils+PSC.swift:38:51: Non-Sendable 'String'-typed result can not be returned from main actor-isolated class method 'systemVersion()' to nonisolated context

/Users/psc/Documents/PSC/Hybrid/H5/PSCH5Module/Example/Pods/PSCAPM/PSCAPM/Classes/PSC/PSCAPMEventReportUtils+PSC.swift:39:52: Non-Sendable 'String'-typed result can not be returned from main actor-isolated class method 'appVersionString()' to nonisolated context

```

​	This is a new feature of SWIFT6.0, which requires additional adaptation. Ignore it for now.

## 3、Solution

### 3.1、Minimum version number dependency

​	Adjust the minimum compilation time of Pod dependencies：

```ruby
post_install do |installer|
    installer.generated_projects.each do |project|
          project.targets.each do |target|
              target.build_configurations.each do |config|
								  config.build_settings["EXCLUDED_ARCHS[sdk=iphonesimulator*]"] = "arm64"
								  # 需调整到16.0
                  config.build_settings['IPHONEOS_DEPLOYMENT_TARGET'] = '16.0'

               end
          end
   end
end
```

​	For better compatibility, the Minimum Deployment of the main project should also be adjusted to 16.0

## 4、Conclusion

​	In order to adapt to iOS26 and compile with Xcode26, the minimum version compatibility is sacrificed, which is in line with Apple's consistent practice of not being backward compatible.
